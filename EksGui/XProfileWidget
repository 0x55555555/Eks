#ifndef XPROFILEWIDGET_H
#define XPROFILEWIDGET_H

#include "XGuiGlobal"
#include "QtCore/QObject"
#include "QtHelper/XQWidget"

class QTreeWidget;
class QListWidget;
class QTreeWidgetItem;
class QCheckBox;
class QStackedLayout;
class QAction;

class XTimeStatistics;

namespace Eks
{
class Profiler;
class ProfilerProfilingContext;
}

class EKSGUI_EXPORT XProfilerWidget : public QWidget
  {
  Q_OBJECT

public:
  XProfilerWidget(QWidget *parent = 0);

private Q_SLOTS:
  void clear();
  void update();
  void chooseFilter();
  void setFilter(QAction*);

private:
  void populateTreeFromContext(const Eks::ProfilerProfilingContext*, QTreeWidgetItem* parent = 0);
  void populateListFromContext(const Eks::ProfilerProfilingContext*);

  void populateHashFromContext(const Eks::ProfilerProfilingContext*, QHash<const char *, XTimeStatistics> &) const;

  void findAllTypes(const Eks::ProfilerProfilingContext*, QList <xuint32> &) const;

  QList <xuint32> _filteredTypes;
  QTreeWidget *_tree;
  QTreeWidget *_list;
  QCheckBox *_showTree;
  QStackedLayout *_stackedLayout;
  };

#endif // XPROFILEWIDGET_H
